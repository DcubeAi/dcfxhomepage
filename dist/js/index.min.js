"use strict";function alertMessage(){}var new_index=1,newData=[];function getFinanceNews(){httpRequest("https://cors.io/?https://pacific-savannah-30447.herokuapp.com/get_news?p=50",{method:"GET"}).then(function(e){newData=e,initialPageView(),buildFinanceNewsUI()}).catch(function(e){})}function togglePrevPage(){1<new_index&&0<newData.length&&(new_index--,initialPageView(),buildFinanceNewsUI())}function toggleNextPage(){new_index<5&&0<newData.length&&(new_index++,initialPageView(),buildFinanceNewsUI())}function toggleChangePage(e){0<newData.length&&(new_index=+e,initialPageView(),buildFinanceNewsUI())}function initialPageView(){var e=document.getElementById("pageview");e.innerHTML="";var n=document.createElement("div");n.className=1===new_index?"pageview-control hidden":"pageview-control",1!==new_index&&n.setAttribute("onclick","togglePrevPage()"),n.innerHTML='<i class="icon-chevron-left"></i>',e.appendChild(n);for(var t=1;t<6;t++){var i=document.createElement("span");t!==new_index&&i.setAttribute("onclick","toggleChangePage("+t+")"),i.className=t===new_index?"hidden":"",i.innerText=t,e.appendChild(i)}var a=document.createElement("div");a.className=5===new_index?"pageview-control hidden":"pageview-control",5!==new_index&&a.setAttribute("onclick","toggleNextPage()"),a.innerHTML='<i class="icon-chevron-right"></i>',e.appendChild(a)}function buildFinanceNewsUI(){var e=document.getElementById("new-lists");e.innerHTML="";for(var n=10*new_index-10;n<10*new_index;n++){var t=newData[n],i=document.createElement("li"),a=document.createElement("p");a.className="title",a.innerText=t.news_content.toString(),i.appendChild(a);var c=document.createElement("p");if(c.className="date",c.innerText=t.news_time.toString(),t.hasOwnProperty("URL")){var o=document.createElement("a");o.innerText="了解更多",o.href=t.URL,o.target="_blank",c.innerText="".concat(c.innerText," | "),c.appendChild(o)}i.appendChild(c),e.appendChild(i)}}function getHoliday(){httpRequest("https://cors.io/?http://114.42.217.41:8080/blog/post/holiday_post/",{method:"GET"}).then(function(e){console.log(e),buildHolidayUI(e)}).catch(function(e){})}function buildHolidayUI(e){var o=document.getElementById("holiday-lists");o.innerHTML="",e.forEach(function(e){var n=document.createElement("li"),t=document.createElement("span");t.innerText=e.country.toString(),t.className=-1<specialLocalTime.indexOf(e.country)?"special":"",n.appendChild(t);var i=document.createElement("span");i.innerText=e.vacation.toString(),n.appendChild(i);var a=document.createElement("span");a.innerText=e.vacation_date.toString(),n.appendChild(a);var c=document.createElement("span");c.innerText=e.vacation_comment.toString(),n.appendChild(c),o.appendChild(n)})}var forexs=["AUDUSD","EURUSD","GBPUSD","NZDUSD","USDCAD","USDCHF","USDJPY","USDSEK"],currentPrice=new Object,index=0;function getPrice(n){httpRequest("https://cors.io/?https://pacific-savannah-30447.herokuapp.com/get_price",{method:"GET"}).then(function(e){console.log(e),currentPrice.length<=0&&(currentPrice=e),buildForexUI(e,n),currentPrice=e}).catch(function(e){})}function getItemCount(){var e=Math.round(.9*document.body.clientWidth*.4/70);return 8<e?8:e}function buildForexUI(e,n){var t=document.getElementById("forex-price");t.innerHTML="";for(var i=0;i<n;i++){var a=forexs[index],c=e[a],o=document.createElement("div");o.className=+c>+currentPrice[a]?"forex-item up":+c==+currentPrice[a]?"forex-item":"forex-item down";var r=document.createElement("p");r.innerText=a.toString(),r.className="title";var d=document.createElement("p");d.innerText=c.toString(),d.className="content",o.appendChild(r),o.appendChild(d),t.appendChild(o),index===forexs.length-1?index=0:index++}}var specialLocalTime=["澳洲","加拿大","法國","德國","紐西蘭","英國","美國"];function getStockMarketTime(){httpRequest("https://cors.io/?https://pacific-savannah-30447.herokuapp.com/get_trading_hours?lang=zh-tw",{method:"GET"}).then(function(e){console.log(e),buildStockMarketTimeUI(e)}).catch(function(e){})}function buildStockMarketTimeUI(e){var o=document.getElementById("stock-lists");o.innerHTML="",e.forEach(function(e){var n=document.createElement("li"),t=document.createElement("span");t.innerText=e.country.toString(),t.className=-1<specialLocalTime.indexOf(e.country)?"special":"",n.appendChild(t);var i=document.createElement("span");i.innerText=e.name.toString(),n.appendChild(i);var a=document.createElement("span");a.innerText=e.country_time.toString().replace(/,/g,""),n.appendChild(a);var c=document.createElement("span");c.innerText=e.local_time.toString().replace(/,/g,""),n.appendChild(c),o.appendChild(n)})}function httpRequest(e,n){return fetch(e,n).then(function(e){return e.json()}).catch(function(e){console.log("Error: "+e)})}function toggleAlertPage(e){var n=e.classList;n.contains("alert_open")?n.remove("alert_open"):n.add("alert_open")}function toggleMenu(){var e=document.getElementById("navbar-active").classList,n=document.getElementById("navbar-selects").classList;e.contains("is-active")?(e.remove("is-active"),n.remove("is-active")):(e.add("is-active"),n.add("is-active"))}function toggleRegister(){var e=document.body.classList;e.contains("registerMode")?e.remove("registerMode"):e.add("registerMode")}